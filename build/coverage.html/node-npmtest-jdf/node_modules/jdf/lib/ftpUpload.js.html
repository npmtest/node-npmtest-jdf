<!doctype html>
<html lang="en">
<head>
    <title>Code coverage report for node-npmtest-jdf/node_modules/jdf/lib/ftpUpload.js</title>
    <meta charset="utf-8">
    <style>
        body, html {
            margin:0; padding: 0;
        }
        body {
            font-family: Arial, Helvetica;
            font-size: 10pt;
        }
        div.header, div.footer {
            background: #eee;
            padding: 1em;
        }
        div.header {
            height: 160px;
            padding: 0 1em 0 1em;
            z-index: 100;
            position: fixed;
            top: 0;
            border-bottom: 1px solid #666;
            width: 100%;
        }
        div.footer {
            border-top: 1px solid #666;
        }
        div.body {
            margin-top: 170px;
        }
        div.meta {
            font-size: 90%;
            text-align: center;
        }
        h1, h2, h3 {
            font-weight: normal;
        }
        h1 {
            font-size: 12pt;
        }
        h2 {
            font-size: 10pt;
        }
        pre {
            font-family: Menlo, Monaco, Consolas, Courier New, monospace;
            margin: 0;
            padding: 0;
            font-size: 14px;
            tab-size: 2;
        }

        div.path { font-size: 110%; }
        div.path a:link, div.path a:visited { color: #000; }
        table.coverage { border-collapse: collapse; margin:0; padding: 0 }

        table.coverage td {
            margin: 0;
            padding: 0;
            color: #111;
            vertical-align: top;
        }
        table.coverage td.line-count {
            width: 50px;
            text-align: right;
            padding-right: 5px;
        }
        table.coverage td.line-coverage {
            color: #777 !important;
            text-align: right;
            border-left: 1px solid #666;
            border-right: 1px solid #666;
        }

        table.coverage td.text {
        }

        table.coverage td span.cline-any {
            display: inline-block;
            padding: 0 5px;
            width: 40px;
        }
        table.coverage td span.cline-neutral {
            background: #eee;
        }
        table.coverage td span.cline-yes {
            background: #b5d592;
            color: #999;
        }
        table.coverage td span.cline-no {
            background: #fc8c84;
        }

        .cstat-yes { color: #111; }
        .cstat-no { background: #fc8c84; color: #111; }
        .fstat-no { background: #ffc520; color: #111 !important; }
        .cbranch-no { background:  yellow !important; color: #111; }

        .cstat-skip { background: #ddd; color: #111; }
        .fstat-skip { background: #ddd; color: #111 !important; }
        .cbranch-skip { background: #ddd !important; color: #111; }

        .missing-if-branch {
            display: inline-block;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: black;
            color: yellow;
        }

        .skip-if-branch {
            display: none;
            margin-right: 10px;
            position: relative;
            padding: 0 4px;
            background: #ccc;
            color: white;
        }

        .missing-if-branch .typ, .skip-if-branch .typ {
            color: inherit !important;
        }

        .entity, .metric { font-weight: bold; }
        .metric { display: inline-block; border: 1px solid #333; padding: 0.3em; background: white; }
        .metric small { font-size: 80%; font-weight: normal; color: #666; }

        div.coverage-summary table { border-collapse: collapse; margin: 3em; font-size: 110%; }
        div.coverage-summary td, div.coverage-summary table  th { margin: 0; padding: 0.25em 1em; border-top: 1px solid #666; border-bottom: 1px solid #666; }
        div.coverage-summary th { text-align: left; border: 1px solid #666; background: #eee; font-weight: normal; }
        div.coverage-summary th.file { border-right: none !important; }
        div.coverage-summary th.pic { border-left: none !important; text-align: right; }
        div.coverage-summary th.pct { border-right: none !important; }
        div.coverage-summary th.abs { border-left: none !important; text-align: right; }
        div.coverage-summary td.pct { text-align: right; border-left: 1px solid #666; }
        div.coverage-summary td.abs { text-align: right; font-size: 90%; color: #444; border-right: 1px solid #666; }
        div.coverage-summary td.file { text-align: right; border-left: 1px solid #666; white-space: nowrap;  }
        div.coverage-summary td.pic { min-width: 120px !important;  }
        div.coverage-summary a:link { color: #000; }
        div.coverage-summary a:visited { color: #333; }
        div.coverage-summary tfoot td { border-top: 1px solid #666; }

        div.coverage-summary .yui3-datatable-sort-indicator, div.coverage-summary .dummy-sort-indicator {
            height: 10px;
            width: 7px;
            display: inline-block;
            margin-left: 0.5em;
        }
        div.coverage-summary .yui3-datatable-sort-indicator {
            background: no-repeat scroll 0 0 transparent;
        }
        div.coverage-summary .yui3-datatable-sorted .yui3-datatable-sort-indicator {
            background-position: 0 -20px;
        }
        div.coverage-summary .yui3-datatable-sorted-desc .yui3-datatable-sort-indicator {
            background-position: 0 -10px;
        }

        .high { background: #b5d592 !important; }
        .medium { background: #ffe87c !important; }
        .low { background: #fc8c84 !important; }

        span.cover-fill, span.cover-empty {
            display:inline-block;
            border:1px solid #444;
            background: white;
            height: 12px;
        }
        span.cover-fill {
            background: #ccc;
            border-right: 1px solid #444;
        }
        span.cover-empty {
            background: white;
            border-left: none;
        }
        span.cover-full {
            border-right: none !important;
        }
        pre.prettyprint {
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        .com { color: #999 !important; }
        .ignore-none { color: #999; font-weight: normal; }

    </style>
</head>
<body>
<div class="header low">
    <h1 style="font-weight: bold;">
        <a href="https://github.com/npmtest/node-npmtest-jdf">npmtest-jdf (v0.0.1)</a>
    </h1>
    <h1>Code coverage report for <span class="entity">node-npmtest-jdf/node_modules/jdf/lib/ftpUpload.js</span></h1>
    <h2>
        
        Statements: <span class="metric">4.76% <small>(4 / 84)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Branches: <span class="metric">0% <small>(0 / 64)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Functions: <span class="metric">0% <small>(0 / 12)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        
        Lines: <span class="metric">5.13% <small>(4 / 78)</small></span> &nbsp;&nbsp;&nbsp;&nbsp;
        
        Ignored: <span class="metric"><span class="ignore-none">none</span></span> &nbsp;&nbsp;&nbsp;&nbsp;
    </h2>
    <div class="path"><a href="../../../../index.html">All files</a> &#187; <a href="index.html">node-npmtest-jdf/node_modules/jdf/lib/</a> &#187; ftpUpload.js</div>
</div>
<div class="body">
<pre><table class="coverage">
<tr><td class="line-count">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155</td><td class="line-coverage"><span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-yes">1</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-no">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span>
<span class="cline-any cline-neutral">&nbsp;</span></td><td class="text"><pre class="prettyprint lang-js">/**
 * @upload 2014-12-5
 */
&nbsp;
var path = require('path');
&nbsp;
//依赖lib
var f = require('./file.js');
var jdf = require('./jdf.js');
&nbsp;
/**
* @upload init
* @time 2014-2-26 19:17:39 / 2014-12-5
* @param {Function} callback custom模式下回调函数
* @param {Boolse} haslog custom模式下是否显示log
* @param {Boolse} hasConfig 配置文件是否存在
* @example
*	jdf upload (default first run "jdf output -html")
*	jdf upload js/a.js (first run "jdf output js/a.js")
*	jdf upload -custom localdir serverdir (serverdir no exists, the same localdir)
*  
*  another call method 
*  	jdf.upload([0, 0, 0, '-custom', 'localdirname', 'serverdirname'], true ,function(){})
*  
*/
exports.init = <span class="fstat-no" title="function not covered" >function(argv, hasConfig, haslog, callback){</span>
<span class="cstat-no" title="statement not covered" >	var haslog = typeof(haslog) == 'undefined' ? true : haslog;</span>
<span class="cstat-no" title="statement not covered" >	var hasConfig = typeof(hasConfig) == 'undefined' ? true : hasConfig;</span>
<span class="cstat-no" title="statement not covered" >	var ftp = {};</span>
<span class="cstat-no" title="statement not covered" >	var uploadSource = path.normalize(f.currentDir()+'/' + jdf.config.outputDirName);</span>
<span class="cstat-no" title="statement not covered" >	var uploadTarget = jdf.config.serverDir;</span>
&nbsp;
	//core function
<span class="cstat-no" title="statement not covered" >	var ftpFn = <span class="fstat-no" title="function not covered" >function(source, target){</span></span>
		//jdf u -c ./dist /export/App/xxx 172.xxx
<span class="cstat-no" title="statement not covered" >		if(jdf.config.serverType  == "linux" || argv[6]){</span>
&nbsp;
<span class="cstat-no" title="statement not covered" >			var fileUpload = require('./fileUpload.js');</span>
<span class="cstat-no" title="statement not covered" >			var sourceFilse = f.getdirlist(source, null, '.svn|Thumbs.db|.DS_Store' );</span>
<span class="cstat-no" title="statement not covered" >			var target = jdf.config.serverDir;</span>
<span class="cstat-no" title="statement not covered" >			var host = jdf.config.host;</span>
<span class="cstat-no" title="statement not covered" >			if(argv[5]) <span class="cstat-no" title="statement not covered" >target = argv[5];</span></span>
<span class="cstat-no" title="statement not covered" >			if(argv[6]) <span class="cstat-no" title="statement not covered" >host = argv[6];</span></span>
&nbsp;
<span class="cstat-no" title="statement not covered" >			fileUpload(sourceFilse, target, host, argv, <span class="fstat-no" title="function not covered" >function(){</span></span>
<span class="cstat-no" title="statement not covered" >				jdf.dot.end(haslog);</span>
<span class="cstat-no" title="statement not covered" >				if(haslog) <span class="cstat-no" title="statement not covered" >console.log('jdf upload "'+host+' '+target+ '" success!');</span></span>
<span class="cstat-no" title="statement not covered" >				if(callback) <span class="cstat-no" title="statement not covered" >callback();</span></span>
			});
		}else <span class="cstat-no" title="statement not covered" >if(jdf.config.serverType  == "ftp" ){</span>
			//console.log('jdf process: uploading [' + source + '].');
<span class="cstat-no" title="statement not covered" >			ftp = require('./ftp.js');</span>
<span class="cstat-no" title="statement not covered" >			ftp.upload(source, target, null, null, null, null, null, <span class="fstat-no" title="function not covered" >function(err){</span></span>
<span class="cstat-no" title="statement not covered" >				jdf.dot.end(haslog);</span>
<span class="cstat-no" title="statement not covered" >				if(haslog) <span class="cstat-no" title="statement not covered" >console.log('jdf upload ['+jdf.config.host +'/'+ target+'] success!');</span></span>
<span class="cstat-no" title="statement not covered" >				if(callback) <span class="cstat-no" title="statement not covered" >callback();</span></span>
			});
		}else{
<span class="cstat-no" title="statement not covered" >			console.log('jdf error [jdf.upload] - server host no setup');</span>
		}
	}
	
	//default upload,do "jdf output -html" first
<span class="cstat-no" title="statement not covered" >	var outputFnOnce = <span class="fstat-no" title="function not covered" >function(){</span></span>
<span class="cstat-no" title="statement not covered" >		if (typeof(argv[3]) == 'undefined') {</span>
			//argv[3] = '-html';
		}
<span class="cstat-no" title="statement not covered" >		jdf.argvInit('output', argv, <span class="fstat-no" title="function not covered" >function(){</span></span>
<span class="cstat-no" title="statement not covered" >			ftpFn(uploadSource, uploadTarget);</span>
		});
	}
&nbsp;
	//watch upload
<span class="cstat-no" title="statement not covered" >	var outputFnWatch = <span class="fstat-no" title="function not covered" >function(){</span></span>
<span class="cstat-no" title="statement not covered" >		ftp.quit();</span>
<span class="cstat-no" title="statement not covered" >		jdf.buildMain('output');</span>
<span class="cstat-no" title="statement not covered" >		Output.init({</span>
			//type:'hashtml',
			callback:<span class="fstat-no" title="function not covered" >function(){</span>
<span class="cstat-no" title="statement not covered" >				ftpFn(uploadSource, uploadTarget);</span>
			}
		});
	}
	
<span class="cstat-no" title="statement not covered" >	if( (argv[3] == '-custom'||argv[3] == '-c') &amp;&amp; argv[4] ){</span>
		//custom upload	
<span class="cstat-no" title="statement not covered" >		if ( f.exists(argv[4]) ) {</span>
<span class="cstat-no" title="statement not covered" >			var serverdir = argv[5] ? argv[5] : argv[4];</span>
<span class="cstat-no" title="statement not covered" >			console.log('jdf uploading');</span>
<span class="cstat-no" title="statement not covered" >			jdf.dot.begin();</span>
<span class="cstat-no" title="statement not covered" >			ftpFn(argv[4], serverdir);</span>
		} else{
<span class="cstat-no" title="statement not covered" >			console.log('jdf warning [jdf.upload] - "'+argv[4]+'" not exists');</span>
		};
	}else{
<span class="cstat-no" title="statement not covered" >		if(!hasConfig){</span>
<span class="cstat-no" title="statement not covered" >			console.log('jdf error: "config.json" is not exists');</span>
<span class="cstat-no" title="statement not covered" >			return;</span>
		}
&nbsp;
<span class="cstat-no" title="statement not covered" >		if(jdf.config.host == JSON.parse(jdf.config.configJsonFileContent).host){</span>
<span class="cstat-no" title="statement not covered" >			console.log('jdf error: config.json "host" is empty');</span>
<span class="cstat-no" title="statement not covered" >			return;</span>
		}
	
		//entrance
<span class="cstat-no" title="statement not covered" >		if (argv[3] == '-watch') {</span>
			//watch upload
<span class="cstat-no" title="statement not covered" >			outputFnOnce();</span>
<span class="cstat-no" title="statement not covered" >			Node_watch(f.currentDir(), <span class="fstat-no" title="function not covered" >function(filename) {</span></span>
<span class="cstat-no" title="statement not covered" >				console.log(filename);</span>
<span class="cstat-no" title="statement not covered" >				outputFnWatch();</span>
			});
		}else <span class="cstat-no" title="statement not covered" >if( (argv[3]=='-preview' || argv[3]=='-p' || argv[4]=='-preview' || argv[4]=='-p') &amp;&amp; jdf.config.previewServerDir ){</span>
			//preview
<span class="cstat-no" title="statement not covered" >			if(argv[3] == '-preview' || argv[3] == '-p'){</span>
<span class="cstat-no" title="statement not covered" >				argv[3] = jdf.config.buildDirName;</span>
			}
			
<span class="cstat-no" title="statement not covered" >			jdf.argvInit('output', argv, <span class="fstat-no" title="function not covered" >function(){</span></span>
<span class="cstat-no" title="statement not covered" >				ftpFn(uploadSource, jdf.config.previewServerDir);</span>
			});
		}else <span class="cstat-no" title="statement not covered" >if( argv[3] == '-nc' &amp;&amp; jdf.config.newcdn ){</span>
			//newcdn css/js/widget
<span class="cstat-no" title="statement not covered" >			if (typeof(argv[4]) != 'undefined'){</span>
<span class="cstat-no" title="statement not covered" >				argv[3] = argv[4];</span>
<span class="cstat-no" title="statement not covered" >				delete argv[4];</span>
			}else{
<span class="cstat-no" title="statement not covered" >				delete argv[3];</span>
			}
&nbsp;
<span class="cstat-no" title="statement not covered" >			jdf.config.cdn = jdf.config.newcdn;</span>
<span class="cstat-no" title="statement not covered" >			outputFnOnce();</span>
		}else <span class="cstat-no" title="statement not covered" >if( argv[3] == '-nh' &amp;&amp; jdf.config.newcdn){</span>
			//newcdn html
<span class="cstat-no" title="statement not covered" >			argv[3] = jdf.config.buildDirName;</span>
			//内链link src替换
<span class="cstat-no" title="statement not covered" >			jdf.config.cdnDefalut = jdf.config.cdn;</span>
<span class="cstat-no" title="statement not covered" >			jdf.config.cdn = jdf.config.newcdn;</span>
<span class="cstat-no" title="statement not covered" >			jdf.argvInit('output', argv, <span class="fstat-no" title="function not covered" >function(){</span></span>
<span class="cstat-no" title="statement not covered" >				ftpFn(uploadSource, jdf.config.previewServerDir);</span>
			});
		}else <span class="cstat-no" title="statement not covered" >if(argv[3] == '-list' &amp;&amp; jdf.config.uploadList){</span>
			// 根据config.json配置上传
<span class="cstat-no" title="statement not covered" >			argv[3] = jdf.config.uploadList;</span>
<span class="cstat-no" title="statement not covered" >			jdf.argvInit('output', argv, <span class="fstat-no" title="function not covered" >function(){</span></span>
<span class="cstat-no" title="statement not covered" >				ftpFn(uploadSource, uploadTarget);</span>
			});
		}else {
			//default upload
<span class="cstat-no" title="statement not covered" >			outputFnOnce();</span>
		}
	}
}
&nbsp;</pre></td></tr>
</table></pre>
</div>
<div class="footer">
    <div class="meta">Generated by <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a> at Thu Apr 20 2017 15:06:10 GMT+0000 (UTC)</div>
</div>
</body>
</html>
